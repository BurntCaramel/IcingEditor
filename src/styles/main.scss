@import 'constants';
@import 'mixins';


html,
body
{
	min-height: 100%;
}
body
{
	box-sizing: border-box;
	height: 100vh;
	margin: 0;
	padding: 0;
	padding-bottom: $mainFooterHeight;
	background-color: $backgroundColor;
}

#mainFooter {
	position: fixed;
	z-index: $zIndexMainToolbar + 100;
	bottom: 0;
	left: 0;
	height: $mainFooterHeight;
	font-family: $mainFontFamily;
	background-color: rgba($backgroundColor, 0.9);
	
	p {
		opacity: 0.4;
		margin: 0;
		padding-top: 4px;
		padding-left: 1em;
		padding-right: 1em;
		font-size: 10px;
	}
}

#burntIcingEditor
{
	//box-sizing: border-box;
	max-width: $editorPreviewMaxWidth;
	width: $editorPreviewWidth;
	//height: 100vh;
	margin: auto;
	margin-bottom: $editorMainToolbarHeight;
	padding-top: 8px;
	padding-bottom: 160px;
	font-family: $mainFontFamily;
	
	.mainToolbar
	{
		position: fixed;
		z-index: $zIndexMainToolbar;
		bottom: 0;
		left: 0;
		right: 0;
		//display: flex;
		box-sizing: border-box;
		height: $editorMainToolbarHeight;
		padding-left: 20px;
		padding-top: 8px;
		text-align: center;
		background-color: rgba($backgroundColor, 0.9);
		//background-color: rgba($darkLiftColor, 0.9);
		
		opacity: 0.95;
		transition: opacity $hoverTransitionDuration ease-out;
		&:hover {
			opacity: 1.0;
		}
		
		.toolbarButton
		{
			@include toolbarButton_light($pressedIsDark: true);
			
			margin-right: 10px;
		}
		.toolbarButton-selected
		{
			@include toolbarButton_dark();
		}
	}
	.mainToolbar_availableDocumentsSelect,
	.mainToolbar_availableDocumentsSingle {
		display: inline-block;
		margin-left: 1em;
		font-style: italic;
		
		@if false {
			border: 1px solid $toolbarButtonTextColor;
			background-color: $backgroundColor;
			-webkit-appearance: none;
		}
	}
	
	
	.blocks
	{
		position: relative;
		left: -18vw;
		transition: left $editSliderTransitionDuration ease-out, background-color $hoverTransitionDuration ease;
		
		&:hover {
			//background-color: rgba(black, 0.025);
		}
	}
	
	
	.blocks_makeSubsection
	{
		position: relative;
		visibility: hidden;
		margin: auto;
		width: 60%;
	}
	.blocks:hover .blocks_makeSubsection,
	.blocks_makeSubsection-active,
	.blocks_changeSubsection-hasSelectedSubsectionType {
		visibility: visible;
	}
	.blocks_makeSubsection_mainButton {
		@include toolbarButton_light($small: true);
		
		//@extend %toolbarButton_light;
		display: block;
		margin: auto;
		opacity: (1.0/28.0);
		//margin-top: 4px;
		//margin-bottom: 4px;
	}
	.blocks_changeSubsection-hasSelectedSubsectionType .blocks_makeSubsection_mainButton {
		opacity: 0.5;
	}
	.blocks_makeSubsection-active .blocks_makeSubsection_mainButton,
	.blocks_makeSubsection_mainButton:hover {
		opacity: 1.0;
		
		@extend %toolbarButton_light_hover;
	};
	
	.blocks_makeSubsection_choices {
		position: absolute;
		//opacity: 0.98;
		width: 60%;
		left: 20%;
		z-index: $zIndexActiveMenu;
		background-color: $toolbarButtonSelectedBackgroundColor;
		@include holderBorderRadius();
		@include slightBoxShadow();
		
		button {
			@include toolbarButton_dark($small: true);
			
			display: block;
			width: 100%;
		}
	}
	
	
	.block
	{
		position: relative;
		//margin-bottom: 20px;
		font-size: 15px;
		line-height: 1.3;
		min-height: ceil(1.3 * 15px);
		transition: background-color $hoverTransitionDuration ease;
	}
	.block-edited
	//.block-hover //.block:hover
	{
		//background-color: rgba(white, 0.2);
		background-color: rgba(black, 0.025);
		//box-shadow: 0 0 4px rgba(black, 0.025);
	}
	
	.block-text-body .text
	{
		
	}
	.block-text-heading .text
	{
		font-size: 36px;
	}
	.block-text-subhead1 .text
	{
		font-size: 24px;
	}
	.block-text-subhead2 .text
	{
		font-size: 21px;
	}
	.block-text-subhead3 .text
	{
		font-size: 18px;
	}
	.block-particular,
	.block-media
	{
		padding: 5px;
		background-color: rgba(black, 0.1);
		
		&:not(.block-edited):hover {
			background-color: rgba(black, 1/16);
		}
		
		&.block-edited,
		&.block-edited:hover {
			background-color: white;
		}
	}
	
	.block-media-externalImage-HTMLRepresentation {
		img {
			max-width: $editorPreviewMaxWidth;
		}
	}
	
	
	.subsection {
		@extend %toolbarButton_small;
		
		display: block;
		margin-top: 4px;
		margin-bottom: 4px;
		text-align: center;
		font-size: 10px;
	}
	
	.block-inSubsection-unorderedList {
		&:before {
			content: 'â€¢';
			position: absolute;
			left: -0.5em;
		};
	}
	
	.block-inSubsection-orderedList {
		&:before {
			content: attr(data-subsection-child-index) ".";
			position: absolute;
			left: -2.2em;
			min-width: 1.9em; // Leave a little bit of space on the right.
			text-align: right;
			opacity: 0.45;
		}
	}
	
	
	.textItem
	{
		.text {
			border: 1px dotted transparent;
			transition: background-color $hoverTransitionDuration ease;
		}
	}
	
	.textItem:not(.textItem-edited):hover .text
	{
		background-color: rgba(white, 0.2);
	}
	.textItem-edited .text
	{
		//border: 1px dotted white;
		background-color: white;
	}
	
	.textItem-hasTrait-bold .text
	{
		font-weight: bold;
	}
	.textItem-hasTrait-italic .text
	{
		font-style: italic;
	}
	.textItem-hasTrait-link {
		border-bottom: 1px dotted rgba(20, 200, 255, 1.0);
	}
	
	
	.blockItemToolbar
	{
		position: absolute;
		top: 0;
		bottom: 0;
		right: 100%;
		padding-right: 3vw;
	}
	.blockItemToolbar_typeChooser
	{
		position: relative;
		opacity: 0.25;
	}
	.blockItemToolbar_typeChooser_mainButton,
	.block_reorder_moveThisButton,
	.block_reorder_keepHereButton
	{
		@include toolbarButton_light($small: true);
	}
	
	.blockItemToolbar_typeChooser:hover,
	.blockItemToolbar_typeChooser-active,
	.block-edited .blockItemToolbar_typeChooser {
		opacity: 1.0;
		
		.blockItemToolbar_typeChooser_mainButton {
			//background-color: $toolbarButtonBackgroundColor;
		}
	}
	
	.blockItemToolbar_typeChooser_choices
	{
		position: absolute;
		z-index: $zIndexActiveMenu;
		top: 0;
		left: 100%;
		display: flex;
		//align-items: flex-start;
		//flex-wrap: wrap;
		text-align: center;
		background-color: $toolbarButtonSelectedBackgroundColor;
		@include holderBorderRadius();
		@include slightBoxShadow();
	}
	.blockItemToolbar_typeChooser_choices_group {
		padding: 4px;
		
		.toolbarButton {
			@include toolbarButton_dark($small: true);
			
			display: block;
			//width: 100%;
			padding: 5px 10px;
			//margin-bottom: 4px;
		}
		.toolbarButton-selected {
			@extend %toolbarButton_dark_pressed;
		}
		/*
		.toolbarButton:hover {
			@extend %toolbarButton_light;
			@extend %toolbarButton_light_hover;
		}
		*/
	}
	.blockItemToolbar_typeChooser_choices_group_title
	{
		@extend %smallUIHeading;
		
		margin: 0;
		padding: 0;
		padding-top: 4px;
		padding-bottom: 4px;
		font-style: italic;
		color: white;
	}
	
	/*
	.block:hover .blockItemToolbar
	{
		opacity: 1.0;
	}
	*/
	
	
	.textItemEditor
	{
		position: absolute;
		left: 100%;
		margin-left: 40px;
		
		textarea
		{
			max-width: $editorInputMaxWidth;
			width: $editorInputWidth;
			height: 140px;
			padding: 10px;
			font-size: 17px;
			line-height: 1.3;
			background-color: $inputBackgroundColor;
			border: none;
		}
	}
	
	.textItemEditor_instructions {
		overflow: hidden;
		opacity: 0.25;
		font-size: 11px;
		line-height: 1;
		margin-bottom: 4px;
	}
	.textItemEditor_instructions_keyShortcuts {
		float: right;
	}
	
	.textItemEditor_traitsToolbar
	{
		clear: both;
		
		.buttonHolder {
			display: inline-block;
		}
		
		.toolbarButton,
		.toolbarDivider
		{
			margin-right: 4px;
		}
		.toolbarDivider {
			@extend %toolbarDivider;
		}
		
		.toolbarButton {
			@include toolbarButton_light($pressedIsDark: true);
		}
		
		@if false {
			.toolbarButton {
				@extend %toolbarButton;
				@extend %toolbarButton_light;
			}
		
			.toolbarButton:hover {
				@extend %toolbarButton_light_hover;
			}
			.toolbarButton:active {
				@extend %toolbarButton_light_pressed_dark;
			}
		}
		
		.toolbarButton-selected,
		.toolbarButton-showingFields
		{
			@include toolbarButton_dark();
		}
		
		.toolbarButton-showingFields {
			border-bottom-left-radius: 0;
			border-bottom-right-radius: 0;
		}
	}
	
	.textItemEditor_blockTraitsToolbar_heading {
		@extend %smallUIHeading;
		
		margin-top: 12px;
		margin-bottom: 4px;
	}
	
	
	.fieldsHolder,
	.choice
	{
		display: flex;
		flex-wrap: wrap;
		justify-content: flex-start;
	}
	
	.fieldsHolder
	{
		margin: 0 (-$fieldsPadding);
		
		.inputLabel,
		.choice,
		.choice_fieldsHolder
		{
			flex: 4 0 100%;
			box-sizing: border-box;
		}
		
		.inputLabel,
		.choice_fieldsHolder
		{
			padding: 0 $fieldsPadding;
		}
		.inputLabel-inputType-number-integer {
			flex: 2 0 33.333333%;
			//padding-right: 10px;
			/*
			+ .inputLabel-inputType-number-integer {
				padding-right: 0;
				padding-left: 10px;
			}
			*/
		}
		
		.inputLabel_title {
			display: block;
			font-size: 10px;
		}
		
		.input-textual,
		.choice_select {
			box-sizing: border-box;
			display: block;
			min-width: 100%;
			margin: 0;
			margin-bottom: 8px;
			font-size: 12px;
			line-height: 1.3;
		}
		
		.input-textual {
			border: none;
			padding: 2px 4px;
		}
	}
	.choice_fieldsHolder {
		// Nested fields get an indent.
		padding-left: 20px;
	}
	
	.traitFieldsHolder {
		position: absolute;
		z-index: 1000;
		left: 0;
		width: 280px;
		margin-bottom: 10px;
		padding: 12px;
		background-color: $toolbarButtonSelectedBackgroundColor;
		border-radius: $boxBorderRadius;
		
		.inputLabel_title {
			color: white;
		}
		
		.removeButton {
			margin-top: 2px;
			
			& {
				@extend %toolbarButton;
				@extend %toolbarButton_dark;
				@extend %toolbarButton_dark_hover;
			}
			&:hover,
			&:active {
				@extend %toolbarButton_light;
				@extend %toolbarButton_light_hover;
			}
		}
	}
	.textItemEditor_traitsToolbar .buttonHolder:first-child .traitFieldsHolder
	{
		border-top-left-radius: 0;
	}
	
	
	.particularEditor
	{
		position: absolute;
		top: 0;
		left: 100%;
		width: $editorInputWidth;
		margin-left: 3vw;
		
		.inputLabel_title {
			font-size: 12px;
		}
		
		.textItemEditor_blockTraitsToolbar {
			margin-top: 20px;
		}
	}
	
	
	.block_reorder_moveThisButton,
	.block_reorder_moveHere
	{
		transition: opacity 0.35s ease;
	}
	.block_reorder_moveThisButton-hidden,
	.block_reorder_moveHere-hidden
	{
		opacity: 0.0;
	}
	
	.block_reorder_moveHere {
		position: relative;
		text-align: center;
		
		&:after {
			content: '';
			opacity: 0.333;
			position: absolute;
			left: 0;
			right: 0;
			top: 50%;
			height: 2px;
			background-color: white;
			border-radius: 1px;
		}
	}
	.block_reorder_moveHere_button {
		@include toolbarButton_light($small: true);
		
		position: relative;
		z-index: 1;
	}
	
	
	.previewHTMLHolder {
		padding: 1em;
		font-family: inherit;
		white-space: pre-wrap;
		font-size: 13px;
		line-height: 1.3;
		background-color: rgba(white, 0.4);
		
		code {
			//font-family: "Courier", monospace;
			font-family: inherit;
		}
	}
	
	@if false
	{
	@media (max-width: 1100px) {
		left: 0;
		
		.blocks {
			position: relative;
			left: 0;
		}
		.blocks-hasEditedBlock {
			//left: -100%;
			left: -480px;
		}
	}
	}
	
	@media (max-width: 850px) {
		max-width: none;
		width: 60vw;
		
		.blocks {
			position: relative;
			left: 0;
			max-width: 60vw;
		}
		.blocks-hasEditedBlock {
			left: -70vw;
		}
		
		.textItemEditor
		{
			position: absolute;
			left: 100%;
			margin-left: 40px;
		
			textarea
			{
				max-width: none;
				width: 70vw;
			}
		}
	}
}
